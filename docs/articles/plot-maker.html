<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tlf">
<title>Run Shiny App to Create Plots • tlf</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run Shiny App to Create Plots">
<meta property="og:description" content="tlf">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tlf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.88</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/tlf.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/atom-plots.html">Atom Plots</a>
    <a class="dropdown-item" href="../articles/box-whisker-vignette.html">Box-Whisker Plots</a>
    <a class="dropdown-item" href="../articles/histogram.html">Histogram Plots</a>
    <a class="dropdown-item" href="../articles/pk-ratio-vignette.html">PK Ratio Plots</a>
    <a class="dropdown-item" href="../articles/plot-configuration.html">Introduction to PlotConfiguration objects</a>
    <a class="dropdown-item" href="../articles/plot-maker.html">Run Shiny App to Create Plots</a>
    <a class="dropdown-item" href="../articles/plot-time-profile.html">Time Profile Plots</a>
    <a class="dropdown-item" href="../articles/theme-maker.html">Run Shiny App to Create Themes</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/open-systems-pharmacology/tlf-library/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="plot-maker_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Run Shiny App to Create Plots</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/open-systems-pharmacology/tlf-library/blob/HEAD/vignettes/plot-maker.Rmd" class="external-link"><code>vignettes/plot-maker.Rmd</code></a></small>
      <div class="d-none name"><code>plot-maker.Rmd</code></div>
    </div>

    
    
<pre><code><span class="co">#&gt; Loading required package: tlf</span></code></pre>
<div class="section level2">
<h2 id="introduction">1. Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The aim of this vignette is to document how to create plots using the <code>tlf</code> user interface (UI) called by <strong><code><a href="../reference/runPlotMaker.html">runPlotMaker()</a></code></strong>.</p>
</div>
<div class="section level2">
<h2 id="how-to-start">2. How to start<a class="anchor" aria-label="anchor" href="#how-to-start"></a>
</h2>
<p>Use the function <code><a href="../reference/runPlotMaker.html">runPlotMaker()</a></code> to start the User Interface. The function will load <code>shiny</code> required for the UI.</p>
<p><img src="figures/plot-maker/start-plot-maker.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="how-to-import-data">3. How to import data<a class="anchor" aria-label="anchor" href="#how-to-import-data"></a>
</h2>
<p>In the navigation bar <strong>Data</strong>, the first field named <strong>Location</strong> allows two ways of importing data: <em>environment</em> and <em>file</em>.</p>
<p>Data can be directly taken from the global environment if the field <strong>Location</strong> uses <em>environment</em>. In the figure below, a variable named <em>myDataset</em> was created in the global environment and is listed in the field <strong>Variables available in environment</strong>. Note that such variables are required as data.frame if you want to create a plot.</p>
<p><img src="figures/plot-maker/import-env-data.png" width="100%" style="display: block; margin: auto;"></p>
<p>Data can also be imported from a file if the field <strong>Location</strong> uses <em>file</em>. This will change the field <strong>Variables available in environment</strong> into <strong>Select a file</strong> (figure below). When a file is loaded, it will be read using the function “read.csv” if the file is a csv file or “read.table” otherwise. Note that it is possible to use options and skip the first lines of your file and/or choose a specific column separator as illustrated in the figure below. In the figure below, a variable named <em>myDataset</em> was created in the global environment and is listed in the field <strong>Variables available in environment</strong>.</p>
<p><img src="figures/plot-maker/import-file-data.png" width="100%" style="display: block; margin: auto;"></p>
<p>When data are imported as illustrated below on the dataset “test-data.csv”, the first rows of the dataset are shown on the bottom left side of the UI.</p>
<p>The field <strong>Data Selection</strong> allows users to enter expressions to select subsets of their data. The only requirement to use that field is to name the imported data “data”. For instance, if only male adults are selected in the example below, the field <strong>Data Selection</strong> should include <em>data<span class="math inline">\(AgeBin %in% "Adults" &amp; data\)</span>Sex %in% “Male”</em>.</p>
<p><img src="figures/plot-maker/imported-data.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="how-to-plot-the-imported-data">4. How to plot the imported data<a class="anchor" aria-label="anchor" href="#how-to-plot-the-imported-data"></a>
</h2>
<p>This section will use the data imported from the dataset “test-data.csv” as an example and will show the workflow to create a PK Ratio plot using the UI.</p>
<div class="section level3">
<h3 id="select-the-plot-and-its-variables">4.1. Select the plot and its variables<a class="anchor" aria-label="anchor" href="#select-the-plot-and-its-variables"></a>
</h3>
<p>The first steps to plot the data is to select which plot and variables are plotted. This is the role of the <strong>Data Mapping</strong> navigation bar (figure below).</p>
<p><img src="figures/plot-maker/data-mapping.png" width="100%" style="display: block; margin: auto;"></p>
<p>In the navigation bar <strong>Data Mapping</strong>, users can select from the variable names available in the dataset which should be plotted in <em>x</em>, <em>y</em> or used to split the data by <em>color</em>, <em>shape</em>, <em>linetype</em>, and <em>fill</em> as illustrated below. Some mappings are not used by all the plots and won’t be available if the corresponding plot is currently selected. Note that if no mapping is wanted for a variable, the corresponding field can be set as <strong>none</strong>.</p>
<p><img src="figures/plot-maker/data-mapping-x.png" width="100%" style="display: block; margin: auto;"></p>
<p>In parallel the field <strong>Select a plot</strong> allows users to choose the advanced plot they want to perform (figure below). In the list of available plots, the names were chosen as the names of the <code>tlf</code> functions used to perform the same plots.</p>
<p><img src="figures/plot-maker/plot-selection.png" width="100%" style="display: block; margin: auto;"></p>
<p>The corresponding plot is shown below. An additional table is added below the PK Ratio plot and shows the measure of number of points within 1.5- and 2-fold errors. Other plots, such as box-whisker plots, may show similar additional results below the plots.</p>
<p><img src="figures/plot-maker/pk-ratio-plot.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="update-plot-properties">4.2. Update plot properties<a class="anchor" aria-label="anchor" href="#update-plot-properties"></a>
</h3>
<p>Some plot properties can be updated using the navigation bars <strong>Labels</strong>, <strong>Background</strong>, <strong>Axes</strong>, <strong>Legend</strong>, <strong>Theme</strong> and <strong>Aesthetics</strong>. The examples below illustrate briefly how to update such properties.</p>
<p>In the <strong>Labels</strong> navigation bar, font properties and content of the most common labels are available. For font properties of ticks and legend are available in the properties <strong>Axes</strong> and <strong>Legend</strong>. The example below highlights the updates of the properties of the watermark which indicates “watermark” instead of “template” written bigger in “goldenrod” color.</p>
<p><img src="figures/plot-maker/plot-labels.png" width="100%" style="display: block; margin: auto;"></p>
<p>The <strong>Background</strong> navigation bar includes the properties of the fill, colors, sizes and linetypes for each background elements. The example below highlights the updates of the properties of the plot area (area around the panel) which was filled with “aliceblue” color and uses a “solid” and “black” border.</p>
<p><img src="figures/plot-maker/plot-background.png" width="100%" style="display: block; margin: auto;"></p>
<p>The <strong>Axes</strong> navigation bar includes the properties of the axes lines (colors, sizes and linetypes), the font properties of their ticks as well as their scales and limits. The example below highlights the updates of Y-axis scale in which new limits were defined as <code>ymin=0.1</code> and <code>ymax=10</code>. Note that limits are taken into account only if both <code>ymin</code> and <code>ymax</code> values are used.</p>
<p><img src="figures/plot-maker/plot-axes.png" width="100%" style="display: block; margin: auto;"></p>
<p>The <strong>Legend</strong> navigation bar includes the properties of the position of the legend (figure below). Fonts and background are not yet accounted for in the current version of <code><a href="../reference/runPlotMaker.html">runPlotMaker()</a></code>.</p>
<p><img src="figures/plot-maker/plot-legend.png" width="100%" style="display: block; margin: auto;"></p>
<p>The <strong>Aesthetics</strong> navigation bar defines how <strong>points</strong>, <strong>lines</strong>, <strong>ribbons</strong> and <strong>errorbars</strong> are plotted. As indicated by the help text, using one of the predefined selection keys (<strong>next</strong>, <strong>same</strong>, <strong>first</strong>, or <strong>reset</strong>) will use the values available in the theme aesthetic map. Any other value will be used as is to define how <strong>points</strong>, <strong>lines</strong>, <strong>ribbons</strong> and <strong>errorbars</strong> are plotted. The example below highlights the updates of how lines are plotted in this PK Ratio plot. Lines are now all in “#000000” (black) color using the concept of theme for their linetype (theme map for linetype is solid, then longdash, then dotted line…).</p>
<p><img src="figures/plot-maker/plot-aesthetics.png" width="100%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="saveexport-a-plot">5. Save/export a plot<a class="anchor" aria-label="anchor" href="#saveexport-a-plot"></a>
</h2>
<p>The navigation bar <strong>Export</strong> allows to save the current plot as a file by clicking on <strong>Save Plot</strong> (figure below). Note that you need to include the extension of the file at the end of the filename.</p>
<p>To prevent the final exported plot to shrink due to the legend, the dimensions can be automatically updated by clicking on <strong>Update dimensions for legend</strong>.</p>
<p>Additionally, the plot configuration - mainly corresponding to the properties updated in section 4.2. - is available as a <code>PlotConfiguration</code> object. The R code to re-create such an object with the same properties is available in the navigation bar <strong>Export</strong>. Users can either copy/paste or save such R code.</p>
<p><img src="figures/plot-maker/plot-export.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="plot-specific-properties">6. Plot-specific properties<a class="anchor" aria-label="anchor" href="#plot-specific-properties"></a>
</h2>
<div class="section level3">
<h3 id="add-a-regression-line">6.1. Add a regression line<a class="anchor" aria-label="anchor" href="#add-a-regression-line"></a>
</h3>
<p>If <em>plotObsVsPred</em> or <em>plotResVsPred</em> is selected in <strong>Select a plot</strong>, you can perform and add a regression to your plot by clicking on the optional field <strong>Regression</strong> available below the plot (figure below). The regression <em>lm</em> stands for <em>linear model</em> and will add a linear regression to the plot; while <em>loess</em> will perform and add a loess regression to the plot.</p>
<p><img src="figures/plot-maker/plot-regression.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="tornado-plot">6.1. Tornado plot<a class="anchor" aria-label="anchor" href="#tornado-plot"></a>
</h3>
<p>If <em>plotTornado</em> is selected in <strong>Select a plot</strong>, two optional fields are available below the plot (figure below).</p>
<ul>
<li>The field <strong>Use bars</strong> allows you to switch from a tornado plot with horizontal bars to dots instead.</li>
<li>The field <strong>Sort by x variable</strong> allows you to choose if the values should be sorted by the absolute value of <em>x</em> or used as is.</li>
</ul>
<p><img src="figures/plot-maker/plot-tornado.png" width="100%" style="display: block; margin: auto;"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Michael Sevestre, Pierre Chelle, Abdullah Hamadeh.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
