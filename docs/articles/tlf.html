<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tlf">
<title>Introduction to tlf-based workflow • tlf</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to tlf-based workflow">
<meta property="og:description" content="tlf">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tlf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/tlf.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/atom-plots.html">Atom plots</a>
    <a class="dropdown-item" href="../articles/box-whisker-vignette.html">Box-whisker plots</a>
    <a class="dropdown-item" href="../articles/histogram.html">Histogram plots</a>
    <a class="dropdown-item" href="../articles/pk-ratio-vignette.html">PK Ratio plots</a>
    <a class="dropdown-item" href="../articles/plot-configuration.html">Introduction to PlotConfiguration objects</a>
    <a class="dropdown-item" href="../articles/plot-maker.html">plot-maker</a>
    <a class="dropdown-item" href="../articles/plot-time-profile.html">Time Profile plots</a>
    <a class="dropdown-item" href="../articles/theme-maker.html">theme-maker</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/open-systems-pharmacology/tlf-library/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to tlf-based workflow</h1>
                        <h4 data-toc-skip class="author">OSPSuiteR
2021</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/open-systems-pharmacology/tlf-library/blob/HEAD/vignettes/tlf.Rmd" class="external-link"><code>vignettes/tlf.Rmd</code></a></small>
      <div class="d-none name"><code>tlf.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/open-systems-pharmacology/tlf-library" class="external-link">tlf</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: tlf</span></code></pre></div>
<div class="section level2">
<h2 id="introduction">1. Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<div class="section level3">
<h3 id="objectives">1.1. Objectives<a class="anchor" aria-label="anchor" href="#objectives"></a>
</h3>
<p>The aim of this vignette is to document and illustrate the typical
workflow needed for the production of plots using the
<code>tlf</code>-library.</p>
</div>
<div class="section level3">
<h3 id="libraries">1.2. Libraries<a class="anchor" aria-label="anchor" href="#libraries"></a>
</h3>
<p>The main purpose of the <code>tlf</code>-library is to standardize
the production of <code>ggplot</code> objects from data produced by the
<code>OSPSuiteR</code> package. As such, <code>tlf</code>-library
requires that the <code>ggplot2</code> package be installed.</p>
</div>
<div class="section level3">
<h3 id="tlf-typical-workflow">1.3. <code>tlf</code> typical workflow<a class="anchor" aria-label="anchor" href="#tlf-typical-workflow"></a>
</h3>
<p>The suggested workflow for producing any kind of plot with the
<code>tlf</code>-library is illustrated in the figure below.</p>
<p><img src="workflow.png" width="100%" style="display: block; margin: auto;"></p>
<p>The standard workflow then proceeds as follows:</p>
<p><strong>Step 0 - Data gathering.</strong> Gather the data into tidy
<code>data.frame</code> format.</p>
<p><strong>Step 1 - Data pre-processing</strong> Pre-process the data
using <code>AggregationSummary</code> class.</p>
<p><strong>Step 2 - Data grouping</strong> Use the
<code>GroupMapping</code> class to specify groupings according to which
the data will be captioned in figure legends.</p>
<p><strong>Step 3 - Data mapping.</strong> Use the
<code>DataMapping</code> class to select the independent and dependent
variables of the processed data as well as the aesthetics that will be
used to differentiate between the groupings of the data that were
specified in step 2.</p>
<p><strong>Step 4 - Plot configuration</strong> Set the
<code>PlotConfiguration</code> object which will define settings of the
plot such as axis labeling, font sizes, and watermarks.</p>
<p><strong>Step 5 - Plot generation</strong> Create a
<code>ggplot</code> object from the above classes using the dedicated
plotting function.</p>
<p>Steps 1, 2, 3, and 4 are not mandatory. If they are skipped,
<code>tlf</code>-library uses default settings in lieu of the objects
created otherwise. Additionally, the <code>PlotConfiguration</code>
object and the <code>DataMapping</code> object can be created
independently. Sections 2 to 4 will focus on
<code>AggregationSummary</code>, <code>DataMapping</code>, and
<code>PlotConfiguration</code>.</p>
</div>
<div class="section level3">
<h3 id="naming-conventions">1.4. Naming Conventions<a class="anchor" aria-label="anchor" href="#naming-conventions"></a>
</h3>
<p>In this package, it was chosen to use specific names for functions
and classes referring to specific plots. The naming convention for
classes is <code>&lt;Plot Name&gt;&lt;Class&gt;</code> and for function
<code>&lt;function&gt;&lt;Plot Name&gt;</code>. Below presents the table
of specific classes and functions that are created using this
convention:</p>
<table class="table">
<colgroup>
<col width="17%">
<col width="27%">
<col width="33%">
<col width="21%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">DataMapping</th>
<th align="left">PlotConfiguration</th>
<th align="left">plot</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">PKRatio</td>
<td align="left">PKRatioDataMapping</td>
<td align="left">PKRatioPlotConfiguration</td>
<td align="left">plotPKRatio</td>
</tr>
<tr class="even">
<td align="left">DDIRatio</td>
<td align="left">DDIRatioDataMapping</td>
<td align="left">DDIRatioPlotConfiguration</td>
<td align="left">plotDDIRatio</td>
</tr>
<tr class="odd">
<td align="left">IndividualIdProfile</td>
<td align="left">IndividualIdProfileDataMapping</td>
<td align="left">IndividualIdProfilePlotConfiguration</td>
<td align="left">plotIndividualIdProfile</td>
</tr>
<tr class="even">
<td align="left">ObsVsPred</td>
<td align="left">ObsVsPredDataMapping</td>
<td align="left">ObsVsPredPlotConfiguration</td>
<td align="left">plotObsVsPred</td>
</tr>
<tr class="odd">
<td align="left">Histogram</td>
<td align="left">HistogramDataMapping</td>
<td align="left">HistogramPlotConfiguration</td>
<td align="left">plotHistogram</td>
</tr>
<tr class="even">
<td align="left">BoxWhisker</td>
<td align="left">BoxWhiskerDataMapping</td>
<td align="left">BoxWhiskerPlotConfiguration</td>
<td align="left">plotBoxWhisker</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="data-pre-processing-aggregationsummary-class">2. Data pre-processing: <code>AggregationSummary</code> class<a class="anchor" aria-label="anchor" href="#data-pre-processing-aggregationsummary-class"></a>
</h2>
<div class="section level3">
<h3 id="data-format">2.1. Data format<a class="anchor" aria-label="anchor" href="#data-format"></a>
</h3>
<p>The workflow assumes that the data to be plotted has been gathered in
the form of a <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html" class="external-link"><em>tidy</em></a>
dataframe. In a tidy format dataframe, each <em>measurement</em>, such
as a simulation result or an experimental observation, is described
entirely in one row. The columns of the data.frame are limited to no
more than the <em>independent variable</em> columns of the measurement
(for example, <em>time</em> and <em>IndividualId</em>) and the
<em>dependent variable</em> columns (in this case
<em>Organism|VenousBlood|Volume</em>), which hold the value of the
measurement. Since no additional columns are allowed, two dependent
variables that have differing sets of independent variables should each
have their own tidy dataframes.</p>
<p>In the sequel, we will use a dataset derived from the
<code>OSPSuiteR</code> package: <code>testData</code>. Let’s look at a
few rows to get a sense of the data:</p>
<table class="table">
<colgroup>
<col width="15%">
<col width="8%">
<col width="11%">
<col width="18%">
<col width="21%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="right">IndividualId</th>
<th align="left">Gender</th>
<th align="left">Race</th>
<th align="left">Population Name</th>
<th align="right">Organism|Age</th>
<th align="right">Organism|Weight</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="left">Male</td>
<td align="left">Caucasian</td>
<td align="left">pop_10</td>
<td align="right">14.06889</td>
<td align="right">54.04230</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">Male</td>
<td align="left">Caucasian</td>
<td align="left">pop_10</td>
<td align="right">23.41955</td>
<td align="right">61.29773</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">Male</td>
<td align="left">Caucasian</td>
<td align="left">pop_10</td>
<td align="right">24.89981</td>
<td align="right">44.39078</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">Male</td>
<td align="left">Caucasian</td>
<td align="left">pop_10</td>
<td align="right">30.45043</td>
<td align="right">53.61099</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">Male</td>
<td align="left">Caucasian</td>
<td align="left">pop_10</td>
<td align="right">22.96949</td>
<td align="right">42.98250</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="left">Female</td>
<td align="left">Caucasian</td>
<td align="left">pop_10</td>
<td align="right">37.71187</td>
<td align="right">50.49205</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="metadata">2.2. MetaData<a class="anchor" aria-label="anchor" href="#metadata"></a>
</h3>
<p>A <code>metaData</code> variable associated with the data can be used
to define additional information such as the <code>dimension</code> and
<code>unit</code> of each column in the <code>data.frame</code>. The
lower limit of quantification of a IndividualId profile can also be
stored in the <code>metaData</code>. The format of metaData is currently
expected to be a list on each variable of lists showing unit and
dimension.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Variable</th>
<th align="left">Dimension</th>
<th align="left">Unit</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">IndividualId</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Gender</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Race</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Population Name</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Organism|Age</td>
<td align="left">Age</td>
<td align="left">yrs</td>
</tr>
<tr class="even">
<td align="left">Organism|Weight</td>
<td align="left">Mass</td>
<td align="left">kg</td>
</tr>
<tr class="odd">
<td align="left">Organism|BMI</td>
<td align="left"></td>
<td align="left">kg/m2</td>
</tr>
<tr class="even">
<td align="left">Organism|Gestational age</td>
<td align="left">Age</td>
<td align="left">week(s)</td>
</tr>
<tr class="odd">
<td align="left">Organism|Height</td>
<td align="left">Length</td>
<td align="left">dm</td>
</tr>
<tr class="even">
<td align="left">Organism|Hematocrit</td>
<td align="left">Volume</td>
<td align="left">l</td>
</tr>
<tr class="odd">
<td align="left">Organism|VenousBlood|Volume</td>
<td align="left">Volume</td>
<td align="left">l</td>
</tr>
<tr class="even">
<td align="left">Organism|ArterialBlood|Volume</td>
<td align="left">Volume</td>
<td align="left">l</td>
</tr>
<tr class="odd">
<td align="left">Organism|Bone|Specific blood flow rate</td>
<td align="left">Flow</td>
<td align="left">l/min</td>
</tr>
<tr class="even">
<td align="left">Organism|Bone|Volume</td>
<td align="left">Volume</td>
<td align="left">l</td>
</tr>
<tr class="odd">
<td align="left">Organism|Brain|Volume</td>
<td align="left">Volume</td>
<td align="left">l</td>
</tr>
<tr class="even">
<td align="left">Compound</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Dose</td>
<td align="left">Mass</td>
<td align="left">mg</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="aggregation">2.3. Aggregation<a class="anchor" aria-label="anchor" href="#aggregation"></a>
</h3>
<p>A common processing of the data is its aggregation. The aggregation
consists in splitting the data into subsets, then computing summary
statistics for each, and returning the result in a convenient form.
Visual predictive checks are typical plots where such method is
useful.</p>
<p>The <code>AggregationSummary</code> class is a helper class that
simplifies the use of aggregation methods on the data. The
<code>R6</code> class <code>AggregationSummary</code> automates the
computation of multiple summary statistics of the raw data produced at
<strong>Step 0</strong>. The output of this optional data pre-processing
step is a dataframe with a column for each summary statistic. This
dataframe can be input into the subsequent steps of the workflow. The
user also has the option of generating <code>metaData</code> for each of
the summary statistics evaluated.</p>
<p>To illustrate the functions of this class for the example of the
dataframe <code>testData</code>, let’s suppose that for each individual
in the <em>IndividualId</em> column, the <em>minimum</em> and the
<em>mean</em> value of the simulated
<em>Organism|VenousBlood|Volume</em> column is to be computed for each
gender in the <em>Gender</em> column. The
<code>AggregationSummary</code> class works in 3 steps:</p>
<ol style="list-style-type: decimal">
<li><p>Three sets of columns are selected from the input dataframe
<code>data</code>: an <em>independent variable</em> set called
<code>xColumnNames</code> (in this case, the <em>IndividualId</em>
column in <code>testData</code>), a <em>grouping variables</em> set
called <code>groupingColumnNames</code> (the <em>Gender</em> column in
<code>testData</code>) and a <em>dependent variables</em> set called
<code>yColumnNames</code> (the <em>Organism|VenousBlood|Volume</em>
column in <code>testData</code>).</p></li>
<li><p>For each value of the independent variable
<code>xColumnNames</code>, the rows of the dataframe are aggregated into
groups defined by unique combinations of the elements in the grouping
variable columns <code>groupingColumnNames</code>.</p></li>
<li><p>Summary statistics (in this case, the <code>minimum</code> and
the <code>mean</code>) for the <code>yColumnNames</code> variables in
each group are evaluated. The functions for computing the the summary
statistics are specified when initializing an
<code>AggregationSummary</code>, via
<code>aggregationFunctionsVector</code>. User-specified descriptive
names of these functions are supplied via the vector of strings named
<code>aggregationFunctionNames</code>. The units and dimensions of the
outputs of these functions are supplied via the vectors of strings named
<code>aggregationUnitsVector</code> and
<code>aggregationDimensionsVector</code>, respectively.</p></li>
</ol>
<p>For this example, the <code>AggregationSummary</code> object
<code>aggSummary</code> is instantiated as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">aggSummary</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/AggregationSummary.html">AggregationSummary</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">testData</span>,
  metaData <span class="op">=</span> <span class="va">testMetaData</span>,
  xColumnNames <span class="op">=</span> <span class="st">"IndividualId"</span>,
  groupingColumnNames <span class="op">=</span> <span class="st">"Gender"</span>,
  yColumnNames <span class="op">=</span> <span class="st">"Organism|VenousBlood|Volume"</span>,
  aggregationFunctionsVector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">min</span>, <span class="va">mean</span><span class="op">)</span>,
  aggregationFunctionNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="st">"Simulated Min"</span>,
    <span class="st">"Simulated Mean"</span>
  <span class="op">)</span>,
  aggregationUnitsVector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"l"</span>, <span class="st">"l"</span><span class="op">)</span>,
  aggregationDimensionsVector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="st">"Volume"</span>,
    <span class="st">"Volume"</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>The dataframe that holds the summary statistics of the aggregated
rows is stored in the <code>dfHelper</code> property of the resulting
<code>aggSummary</code> object. Since two functions (<code>min</code>
and <code>mean</code>) were specified in
<code>aggregationFunctionsVector</code>, the dataframe
<code>aggSummary$dfHelper</code> has, in addition to the
<code>xColumnNames</code>and <code>groupingColumnNames</code> columns,
two additional columns named <code>Simulated Min</code> and
<code>Simulated Mean</code>, which were the names specified in
<code>aggregationFunctionNames</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">aggSummary</span><span class="op">$</span><span class="va">dfHelper</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">IndividualId</th>
<th align="left">Gender</th>
<th align="right">Simulated Min</th>
<th align="right">Simulated Mean</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">5</td>
<td align="left">Female</td>
<td align="right">0.6186527</td>
<td align="right">0.6186527</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">Female</td>
<td align="right">0.6700546</td>
<td align="right">0.6700546</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="left">Female</td>
<td align="right">0.8003464</td>
<td align="right">0.8003464</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="left">Female</td>
<td align="right">0.6001890</td>
<td align="right">0.6001890</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="left">Female</td>
<td align="right">0.7350718</td>
<td align="right">0.7350718</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">Male</td>
<td align="right">0.8767134</td>
<td align="right">0.8767134</td>
</tr>
</tbody>
</table>
<p>The <code>metaData</code> corresponding to the columns of the
resulting dataframes are lists that are stored together in a list with
the <code>metaData</code> of the <code>xColumnNames</code>and
<code>groupingColumnNames</code> columns. The <code>metaData</code> for
the new <code>aggSummary$dfHelper</code> dataframe is stored as the
<code>metaDataHelper</code> property of the <code>aggSummary</code>
object. For this example, the two <code>metaData</code> lists
corresponding to the <code>Simulated Min</code> and
<code>Simulated Mean</code> columns are also are labeled
<code>Simulated Min</code> and <code>Simulated Mean</code>. The contents
of the list <code>aggSummary$metaDataHelper</code> are:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Currently issue with metaData of Gender</span>
<span class="va">aggSummary</span><span class="op">$</span><span class="va">metaDataHelper</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>
<span class="va">aggMetaData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  <span class="st">"unit"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">aggSummary</span><span class="op">$</span><span class="va">metaDataHelper</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">x</span><span class="op">$</span><span class="va">unit</span>
  <span class="op">}</span><span class="op">)</span>,
  <span class="st">"dimension"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">aggSummary</span><span class="op">$</span><span class="va">metaDataHelper</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">x</span><span class="op">$</span><span class="va">dimension</span>
  <span class="op">}</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">aggMetaData</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">unit</th>
<th align="left">dimension</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">IndividualId</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Simulated Min</td>
<td align="left">l</td>
<td align="left">Volume</td>
</tr>
<tr class="odd">
<td align="left">Simulated Mean</td>
<td align="left">l</td>
<td align="left">Volume</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="mapping-and-grouping-of-data-datamapping-class">3. Mapping and grouping of data: <code>DataMapping</code> class<a class="anchor" aria-label="anchor" href="#mapping-and-grouping-of-data-datamapping-class"></a>
</h2>
<p>The role of the <code>DataMapping</code> class is to provide a
user-friendly interface to indicate what data should be plotted. In most
cases, this class needs to be initialized to map what variables are
<code>x</code> and <code>y</code>, and which IndividualIds variable(s)
will group the data. Thus, the most common input are <code>x</code> and
<code>y</code>; however, for more advanced plots, input such as
<code>groupMapping</code> may be used often. For advanced plots,
subclasses are derived from <code>DataMapping</code>, they use unique
input and default related to the advanced plot to make it easier to use
them.</p>
<div class="section level3">
<h3 id="groupmapping">3.1. GroupMapping<a class="anchor" aria-label="anchor" href="#groupmapping"></a>
</h3>
<div class="section level4">
<h4 id="grouping-class">3.1.1. Grouping class<a class="anchor" aria-label="anchor" href="#grouping-class"></a>
</h4>
<p>An <code>R6</code> class called <code>Grouping</code> can be used to
group the data into subsets that, in the final plots, are to be
distinguished both aesthetically and in legend captions. In addition,
these subsets can be listed under descriptive legend titles.</p>
<p>As an example, a <code>Grouping</code> object called
<code>grouping1</code> can be used to specify that the data in a
<em>tidy</em> data.frame should be grouped by both “Compound” and
“Dose”:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Grouping by variable names:</span>
<span class="va">grouping1</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Grouping.html">Grouping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Compound"</span>, <span class="st">"Dose"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>With this minimal input, a legend associated with this grouping will
have the default title “Compound-Dose”. On the other hand, a custom
title for this grouping and its legend can be supplied by the user with
the optional <code>label</code> input:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Grouping by variable names and overwriting the default label:</span>
<span class="va">grouping2</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Grouping.html">Grouping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Compound"</span>, <span class="st">"Dose"</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Compound &amp; Dose"</span><span class="op">)</span></code></pre></div>
<p>In the above two examples, default captions are constructed by
hyphenating the compound type and the dose amount for each row.
Alternatively, the captions can be customized by the user by supplying a
dataframe with the custom captions to the <code>group</code> input of
the <code>Grouping</code> object constructor. The format of this
dataframe is such that the rightmost column contains the desired
captions, the name of this rightmost column is the default legend title
for this grouping, and the remaining columns define the combinations of
row entries that are to receive each caption in the rightmost column. To
illustrate this method, the following dataframe
<code>mappingDataFrame</code> is used to assign captions based on
entries in the “Dose” and “Compound” columns. For example, the caption
“6mg of Aspirin” is assigned to any row in which the “Dose” entry is 6
and the “Compound” entry is “Aspirin”.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Grouping using a data.frame:</span>
<span class="va">mappingDataFrame</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  Compound <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Aspirin"</span>, <span class="st">"Aspirin"</span>, <span class="st">"Sugar"</span>, <span class="st">"Sugar"</span><span class="op">)</span>,
  Dose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">3</span><span class="op">)</span>,
  <span class="st">"Compound &amp; Dose"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="st">"6mg of Aspirin"</span>,
    <span class="st">"3mg of Aspirin"</span>,
    <span class="st">"6mg of Sugar"</span>,
    <span class="st">"3mg of Sugar"</span>
  <span class="op">)</span>,
  check.names <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">mappingDataFrame</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Compound</th>
<th align="right">Dose</th>
<th align="left">Compound &amp; Dose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Aspirin</td>
<td align="right">6</td>
<td align="left">6mg of Aspirin</td>
</tr>
<tr class="even">
<td align="left">Aspirin</td>
<td align="right">3</td>
<td align="left">3mg of Aspirin</td>
</tr>
<tr class="odd">
<td align="left">Sugar</td>
<td align="right">6</td>
<td align="left">6mg of Sugar</td>
</tr>
<tr class="even">
<td align="left">Sugar</td>
<td align="right">3</td>
<td align="left">3mg of Sugar</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grouping3</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Grouping.html">Grouping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>group <span class="op">=</span> <span class="va">mappingDataFrame</span><span class="op">)</span></code></pre></div>
<p>The default title of the legend that results from this grouping is
the name of the rightmost column, which is “Compound &amp; Dose”. Note
that the <code>check.names</code> option should be set to
<code>FALSE</code> when creating the dataframe
<code>mappingDataFrame</code>, since the legend title contains spaces in
this instance. This legend title can be overridden to be another string
by using the <code>label</code> input of the object constructor, as in
the case of <code>grouping2</code> above.</p>
<p>The three <code>Grouping</code> objects, <code>grouping1</code>,
<code>grouping2</code>, and <code>grouping3</code> respectively yield
the last three columns of the following dataframe:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Apply the mapping to get the grouping captions:</span>
<span class="va">groupingsDataFrame</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  <span class="va">testData</span><span class="op">$</span><span class="va">IndividualId</span>,
  <span class="va">testData</span><span class="op">$</span><span class="va">Dose</span>,
  <span class="va">testData</span><span class="op">$</span><span class="va">Compound</span>,
  <span class="va">grouping1</span><span class="op">$</span><span class="fu">getCaptions</span><span class="op">(</span><span class="va">testData</span><span class="op">)</span>,
  <span class="va">grouping2</span><span class="op">$</span><span class="fu">getCaptions</span><span class="op">(</span><span class="va">testData</span><span class="op">)</span>,
  <span class="va">grouping3</span><span class="op">$</span><span class="fu">getCaptions</span><span class="op">(</span><span class="va">testData</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">groupingsDataFrame</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
  <span class="st">"IndividualId"</span>, <span class="st">"Dose"</span>, <span class="st">"Compound"</span>,
  <span class="va">grouping1</span><span class="op">$</span><span class="va">label</span>, <span class="va">grouping2</span><span class="op">$</span><span class="va">label</span>, <span class="va">grouping3</span><span class="op">$</span><span class="va">label</span>
<span class="op">)</span>

<span class="co"># Show results for all groupings:</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">groupingsDataFrame</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="17%">
<col width="6%">
<col width="12%">
<col width="19%">
<col width="21%">
<col width="21%">
</colgroup>
<thead><tr class="header">
<th align="right">IndividualId</th>
<th align="right">Dose</th>
<th align="left">Compound</th>
<th align="left">Compound-Dose</th>
<th align="left">Compound &amp; Dose</th>
<th align="left">Compound &amp; Dose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">6</td>
<td align="left">Aspirin</td>
<td align="left">Aspirin-6</td>
<td align="left">Aspirin-6</td>
<td align="left">6mg of Aspirin</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">3</td>
<td align="left">Aspirin</td>
<td align="left">Aspirin-3</td>
<td align="left">Aspirin-3</td>
<td align="left">3mg of Aspirin</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">6</td>
<td align="left">Aspirin</td>
<td align="left">Aspirin-6</td>
<td align="left">Aspirin-6</td>
<td align="left">6mg of Aspirin</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">3</td>
<td align="left">Sugar</td>
<td align="left">Sugar-3</td>
<td align="left">Sugar-3</td>
<td align="left">3mg of Sugar</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">6</td>
<td align="left">Sugar</td>
<td align="left">Sugar-6</td>
<td align="left">Sugar-6</td>
<td align="left">6mg of Sugar</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="right">3</td>
<td align="left">Aspirin</td>
<td align="left">Aspirin-3</td>
<td align="left">Aspirin-3</td>
<td align="left">3mg of Aspirin</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="right">6</td>
<td align="left">Aspirin</td>
<td align="left">Aspirin-6</td>
<td align="left">Aspirin-6</td>
<td align="left">6mg of Aspirin</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="right">3</td>
<td align="left">Sugar</td>
<td align="left">Sugar-3</td>
<td align="left">Sugar-3</td>
<td align="left">3mg of Sugar</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="right">6</td>
<td align="left">Sugar</td>
<td align="left">Sugar-6</td>
<td align="left">Sugar-6</td>
<td align="left">6mg of Sugar</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="right">3</td>
<td align="left">Sugar</td>
<td align="left">Sugar-3</td>
<td align="left">Sugar-3</td>
<td align="left">3mg of Sugar</td>
</tr>
</tbody>
</table>
<p>A dataframe can also be used to create a <code>Grouping</code> object
that subsets the data based on whether a numeric grouping variable
satisfies an specific inequality. For example, individuals in
<code>testData</code> can be grouped according to whether or not their
age exceeds 6 years by first defining the following dataframe:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Grouping using a data.frame:</span>
<span class="va">binningDataFrame</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  Age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
  <span class="st">"Age Range"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="st">"Age 6 or lower"</span>,
    <span class="st">"Above age 6"</span>
  <span class="op">)</span>,
  check.names <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
<p>Then creating a new grouping:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grouping4</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Grouping.html">Grouping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>group <span class="op">=</span> <span class="va">binningDataFrame</span><span class="op">)</span></code></pre></div>
<p>This new <code>Grouping</code> object <code>grouping4</code> yields
the following captions</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Apply the mapping to get the grouping captions:</span>
<span class="va">testData</span><span class="op">$</span><span class="va">Age</span> <span class="op">&lt;-</span> <span class="va">testData</span><span class="op">$</span><span class="va">`Organism|Age`</span>
<span class="va">binnedGroupingsDataFrame</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  <span class="va">testData</span><span class="op">$</span><span class="va">IndividualId</span>,
  <span class="va">testData</span><span class="op">$</span><span class="va">Age</span>,
  <span class="va">grouping4</span><span class="op">$</span><span class="fu">getCaptions</span><span class="op">(</span><span class="va">testData</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">binnedGroupingsDataFrame</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"IndividualId"</span>, <span class="st">"Age"</span>, <span class="va">grouping4</span><span class="op">$</span><span class="va">label</span><span class="op">)</span>

<span class="co"># Show results for all groupings:</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">binnedGroupingsDataFrame</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">IndividualId</th>
<th align="right">Age</th>
<th align="left">Age Range</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">14.06889</td>
<td align="left">Above age 6</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">23.41955</td>
<td align="left">Above age 6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">24.89981</td>
<td align="left">Above age 6</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">30.45043</td>
<td align="left">Above age 6</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">22.96949</td>
<td align="left">Above age 6</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="right">37.71187</td>
<td align="left">Above age 6</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="right">50.12875</td>
<td align="left">Above age 6</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="right">32.53951</td>
<td align="left">Above age 6</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="right">26.86401</td>
<td align="left">Above age 6</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="right">45.97137</td>
<td align="left">Above age 6</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="groupmapping-class">3.1.2. GroupMapping class<a class="anchor" aria-label="anchor" href="#groupmapping-class"></a>
</h4>
<p>An additional <code>R6</code> class called <code>GroupMapping</code>
maps <code>Grouping</code> objects to aesthetic parameters such as
<code>color</code> or <code>linetype</code>. To distinguish between
“Compound” and “Dose” groups by color and to use the captions and legend
title specified in <code>grouping2</code>, the following groupings
object <code>groups1</code> is constructed:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Map groups to aesthtic properties</span>
<span class="va">groups1</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/GroupMapping.html">GroupMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>color <span class="op">=</span> <span class="va">grouping2</span><span class="op">)</span></code></pre></div>
<p>A <code>GroupMapping</code> object <code>groups2</code> can also be
constructed more quickly by directly associating an aesthetic, such as
<code>color</code>, to a vector of dataframe column names:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Map groups to aesthtic properties</span>
<span class="va">groups2</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/GroupMapping.html">GroupMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Compound"</span>, <span class="st">"Dose"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>or to a <code>Grouping</code> object directly:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Map groups to aesthetic properties</span>
<span class="va">groups3</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/GroupMapping.html">GroupMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>color <span class="op">=</span> <span class="va"><a href="../reference/Grouping.html">Grouping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Compound"</span>, <span class="st">"Dose"</span><span class="op">)</span>,
  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Compound &amp; Dose"</span><span class="op">)</span>
<span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="datamapping">3.2. DataMapping<a class="anchor" aria-label="anchor" href="#datamapping"></a>
</h3>
<p>The <code>R6</code> class <code>XYGDataMapping</code> extracts the
maps the x, y, and grouping variables of data according to the
aesthetics specified in an input <code>GroupMapping</code> object. This
mapping is carried out by an internal function of this class named
<code>checkMapData</code> which checks if the variables indicated the
<code>GroupMapping</code> are included in the data. This method then
returns a simplified dataframe with the variables defined by the
dataMapping.</p>
<p>When no <code>GroupMapping</code> object is supplied upon
construction of a <code>XYGDataMapping</code> object, the function
<code>checkMapData</code> returns a dataframe with <code>x</code> and
<code>y</code>. A dummy variable named <code>aesDefault</code> is added
to the data.frame, its sole purpose is to allow modifications of
aesthetic properties after the creation of the ggplot object (not
possible otherwise).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tpMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/XYGDataMapping.html">XYGDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"IndividualId"</span>, y <span class="op">=</span> <span class="st">"Organism|VenousBlood|Volume"</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tpMapping</span><span class="op">$</span><span class="fu">checkMapData</span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">testData</span>,
  metaData <span class="op">=</span> <span class="va">IndividualIdProfileMetaData</span>
<span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">IndividualId</th>
<th align="right">Organism|VenousBlood|Volume</th>
<th align="left">legendLabels</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">0.8767134</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">0.8130964</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">0.8054172</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">0.8048924</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">0.6127810</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="right">0.6186527</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="right">0.6700546</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="right">0.8003464</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="right">0.6001890</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="right">0.7350718</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>When a <code>GroupMapping</code> object is supplied upon construction
of the <code>XYGDataMapping</code> object, each
<code>x</code>,<code>y</code> pair is associated with a group that can
be used to distinguish the pair aesthetically in the final plot:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Re-use the variable groups previously defined</span>
<span class="va">tpMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/XYGDataMapping.html">XYGDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"IndividualId"</span>, y <span class="op">=</span> <span class="st">"Organism|VenousBlood|Volume"</span>,
  groupMapping <span class="op">=</span> <span class="va">groups1</span>
<span class="op">)</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tpMapping</span><span class="op">$</span><span class="fu">checkMapData</span><span class="op">(</span>data <span class="op">=</span> <span class="va">testData</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="16%">
<col width="47%">
<col width="20%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th align="right">IndividualId</th>
<th align="right">Organism|VenousBlood|Volume</th>
<th align="left">Compound &amp; Dose</th>
<th align="left">legendLabels</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">0.8767134</td>
<td align="left">Aspirin-6</td>
<td align="left">Aspirin-6</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">0.8130964</td>
<td align="left">Aspirin-3</td>
<td align="left">Aspirin-3</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">0.8054172</td>
<td align="left">Aspirin-6</td>
<td align="left">Aspirin-6</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">0.8048924</td>
<td align="left">Sugar-3</td>
<td align="left">Sugar-3</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">0.6127810</td>
<td align="left">Sugar-6</td>
<td align="left">Sugar-6</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="right">0.6186527</td>
<td align="left">Aspirin-3</td>
<td align="left">Aspirin-3</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="right">0.6700546</td>
<td align="left">Aspirin-6</td>
<td align="left">Aspirin-6</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="right">0.8003464</td>
<td align="left">Sugar-3</td>
<td align="left">Sugar-3</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="right">0.6001890</td>
<td align="left">Sugar-6</td>
<td align="left">Sugar-6</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="right">0.7350718</td>
<td align="left">Sugar-3</td>
<td align="left">Sugar-3</td>
</tr>
</tbody>
</table>
<p>A feature of <code>XYGDataMapping</code> class is that, in addition
to specifying a <code>y</code> column, the user may also supply
<code>ymin</code> and <code>ymax</code> columns that can represent the
boundaries of error bars. If only <code>ymin</code> and
<code>ymax</code> are input when constructing the
<code>XYGDataMapping</code> object, with <code>y</code> left undefined
or <code>NULL</code>, the default profile that will ultimately be
plotted is a range plot. If <code>y</code>, <code>ymin</code> and
<code>ymax</code> are all input, the default plot will be a IndividualId
profile plot with an error bar.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Michael Sevestre, Pierre Chelle, Abdullah Hamadeh.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
