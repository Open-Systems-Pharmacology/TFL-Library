<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tlf">
<title>Time Profile plots â€¢ tlf</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Time Profile plots">
<meta property="og:description" content="tlf">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tlf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/tlf.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/atom-plots.html">Atom plots</a>
    <a class="dropdown-item" href="../articles/box-whisker-vignette.html">Box-whisker plots</a>
    <a class="dropdown-item" href="../articles/histogram.html">Histogram plots</a>
    <a class="dropdown-item" href="../articles/pk-ratio-vignette.html">PK Ratio plots</a>
    <a class="dropdown-item" href="../articles/plot-configuration.html">Introduction to PlotConfiguration objects</a>
    <a class="dropdown-item" href="../articles/plot-maker.html">plot-maker</a>
    <a class="dropdown-item" href="../articles/plot-time-profile.html">Time Profile plots</a>
    <a class="dropdown-item" href="../articles/theme-maker.html">theme-maker</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/open-systems-pharmacology/tlf-library/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Time Profile plots</h1>
                        <h4 data-toc-skip class="author">OSPSuiteR
2021</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/open-systems-pharmacology/tlf-library/blob/HEAD/vignettes/plot-time-profile.Rmd" class="external-link"><code>vignettes/plot-time-profile.Rmd</code></a></small>
      <div class="d-none name"><code>plot-time-profile.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/open-systems-pharmacology/tlf-library" class="external-link">tlf</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: tlf</span>
<span class="co"># Place default legend position above the plot for prettier time profile plots</span>
<span class="fu"><a href="../reference/setDefaultLegendPosition.html">setDefaultLegendPosition</a></span><span class="op">(</span><span class="va">LegendPositions</span><span class="op">$</span><span class="va">outsideTop</span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="introduction">1. Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The following vignette aims at documenting and illustrating workflows
for producing Time Profile plots using the <code>tlf</code>-Library.</p>
<p>Time profile plots aims at comparing observed and simulated data
along time. In such plots, observed data are usually plotted as scatter
points with errorbars showing population range or confidence intervals;
while simulated data are usually plotted using lines with shaded ribbons
showing population range or confidence intervals.</p>
</div>
<div class="section level2">
<h2 id="definition-of-the-time-profile-fonctions-and-classes">2. Definition of the time profile fonctions and classes<a class="anchor" aria-label="anchor" href="#definition-of-the-time-profile-fonctions-and-classes"></a>
</h2>
<div class="section level3">
<h3 id="plottimeprofile">2.1. <code>plotTimeProfile</code><a class="anchor" aria-label="anchor" href="#plottimeprofile"></a>
</h3>
<p>Besides, the usual <code>tlf</code> input arguments commonly used by
the plot functions (<code>data</code>, <code>metaData</code>,
<code>dataMapping</code>, <code>plotConfiguration</code> and
<code>plotObject</code>), the function <code>plotTimeProfile</code> also
includes the following optional input arguments:</p>
<ul>
<li>
<strong><code>observedData</code></strong>: A data.frame to use for
plot. Unlike <code>data</code>, meant for simulated data, plotted as
lines and ribbons; <code>observedData</code> is plotted as scatter
points and errorbars.</li>
<li>
<strong><code>observedDataMapping</code></strong>: An
<code>ObservedDataMapping</code> object mapping <code>x</code>,
<code>y</code>, <code>ymin</code>, <code>ymax</code>, and aesthetic
groups to their variable names of <code>observedData</code>.</li>
</ul>
</div>
<div class="section level3">
<h3 id="data-mappings">2.2. Data Mappings<a class="anchor" aria-label="anchor" href="#data-mappings"></a>
</h3>
<div class="section level4">
<h4 id="datamapping-argument">2.2.1. <code>dataMapping</code> argument<a class="anchor" aria-label="anchor" href="#datamapping-argument"></a>
</h4>
<p>For time profile simulated data, <code>TimeProfileDataMapping</code>
objects are required through the <code>dataMapping</code> argument of
the function <code>plotTimeProfile</code>.</p>
<p>As highlighted below, the class is initialized using the method
<code>$new</code>. The optional arguments <code>ymin</code> and
<code>ymax</code> define the shaded area of population range or
confidence interval. The argument <code>y</code> is optional,
<strong>only if</strong> <code>ymin</code> and <code>ymax</code> are
provided.</p>
<p>It can be noted that the argument <code>group</code> can be used to
group the data by these aesthetics.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va"><a href="../reference/TimeProfileDataMapping.html">TimeProfileDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
<span class="va">x</span>,
y <span class="op">=</span> <span class="cn">NULL</span>,
ymin <span class="op">=</span> <span class="cn">NULL</span>,
ymax <span class="op">=</span> <span class="cn">NULL</span>,
group <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="observeddatamapping-argument">2.2.2. <code>observedDataMapping</code> argument<a class="anchor" aria-label="anchor" href="#observeddatamapping-argument"></a>
</h4>
<p>For time profile observed data, <code>ObservedDataMapping</code>
objects are required through the <code>observedDataMapping</code>
argument of the function <code>plotTimeProfile</code>.</p>
<p>As highlighted below, the class is initialized using the method
<code>$new</code>. The optional arguments <code>ymin</code> and
<code>ymax</code> define the error bars of population range or
confidence interval. The optional argument <code>error</code> can be
used instead to calculate the errorbars from the variable
<code>y</code>.</p>
<p>The argument <code>mdv</code>, meant for missing dependent variable,
is a flag inspired from Nonmem for excluding data from the final time
profile plot.</p>
<p>It can be noted that the argument <code>group</code> can be used to
group the data by these aesthetics.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va"><a href="../reference/ObservedDataMapping.html">ObservedDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
<span class="va">x</span>,
<span class="va">y</span>,
error <span class="op">=</span> <span class="cn">NULL</span>,
ymin <span class="op">=</span> <span class="cn">NULL</span>,
ymax <span class="op">=</span> <span class="cn">NULL</span>,
group <span class="op">=</span> <span class="cn">NULL</span>,
mdv <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="remaining-todos">2.2.3. Remaining TODOs<a class="anchor" aria-label="anchor" href="#remaining-todos"></a>
</h4>
<p>Some time profiles can also show another quantity in parallel and
whose unit is different. A right axis is usually added for such plots to
describe the values of that quantity. The
<code>TimeProfileDataMapping</code> and <code>ObservedData</code>
objects do not support yet a <code>y2</code> argument for displaying
data on the right axis.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="examples">3. Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>For the examples presented in the sequel, two simulated and two
observed datasets are created below:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Simulation time</span>
<span class="va">simTime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">24</span>, <span class="fl">0.1</span><span class="op">)</span>

<span class="co"># metaData will be used during the smart mapping</span>
<span class="co"># to label the axes as "dimension [unit]"</span>
<span class="va">metaData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    dimension <span class="op">=</span> <span class="st">"Time"</span>,
    unit <span class="op">=</span> <span class="st">"h"</span>
  <span class="op">)</span>,
  concentration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    dimension <span class="op">=</span> <span class="st">"Concentration"</span>,
    unit <span class="op">=</span> <span class="st">"mg/l"</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="co"># Spread metaData to min/max</span>
<span class="va">metaData</span><span class="op">$</span><span class="va">maxConcentration</span> <span class="op">&lt;-</span> <span class="va">metaData</span><span class="op">$</span><span class="va">concentration</span>
<span class="va">metaData</span><span class="op">$</span><span class="va">minConcentration</span> <span class="op">&lt;-</span> <span class="va">metaData</span><span class="op">$</span><span class="va">concentration</span>

<span class="co"># Simulated data 1: exponential decay</span>
<span class="va">simData1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  time <span class="op">=</span> <span class="va">simTime</span>,
  concentration <span class="op">=</span> <span class="fl">15</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.1</span> <span class="op">*</span> <span class="va">simTime</span><span class="op">)</span>,
  minConcentration <span class="op">=</span> <span class="fl">12</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.12</span> <span class="op">*</span> <span class="va">simTime</span><span class="op">)</span>,
  maxConcentration <span class="op">=</span> <span class="fl">18</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.08</span> <span class="op">*</span> <span class="va">simTime</span><span class="op">)</span>,
  caption <span class="op">=</span> <span class="st">"Simulated Data 1"</span>
<span class="op">)</span>

<span class="co"># Simulated data 2: first order absorption with exponential decay</span>
<span class="va">simData2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  time <span class="op">=</span> <span class="va">simTime</span>,
  concentration <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.1</span> <span class="op">*</span> <span class="va">simTime</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">simTime</span><span class="op">)</span><span class="op">)</span>,
  minConcentration <span class="op">=</span> <span class="fl">8</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.12</span> <span class="op">*</span> <span class="va">simTime</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">simTime</span><span class="op">)</span><span class="op">)</span>,
  maxConcentration <span class="op">=</span> <span class="fl">12</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.08</span> <span class="op">*</span> <span class="va">simTime</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">simTime</span><span class="op">)</span><span class="op">)</span>,
  caption <span class="op">=</span> <span class="st">"Simulated Data 2"</span>
<span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Observed data 1</span>
<span class="va">obsData1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">24</span><span class="op">)</span>,
  concentration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11.7</span>, <span class="fl">8.4</span>, <span class="fl">7.5</span>, <span class="fl">3.6</span>, <span class="fl">1.0</span><span class="op">)</span>,
  sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.204</span>, <span class="fl">0.21</span>, <span class="fl">0.241</span>, <span class="fl">0</span>, <span class="fl">0.18</span><span class="op">)</span>,
  caption <span class="op">=</span> <span class="st">"Observed Data 1"</span>
<span class="op">)</span>

<span class="co"># Observed data 2</span>
<span class="va">obsData2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">24</span><span class="op">)</span>,
  concentration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6.1</span>, <span class="fl">7.3</span>, <span class="fl">4.4</span>, <span class="fl">3.2</span>, <span class="fl">1.1</span><span class="op">)</span>,
  minConcentration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5.7</span>, <span class="fl">7.0</span>, <span class="fl">4.3</span>, <span class="fl">2.5</span>, <span class="fl">0.8</span><span class="op">)</span>,
  maxConcentration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">7.1</span>, <span class="fl">8.2</span>, <span class="fl">5.8</span>, <span class="fl">3.3</span>, <span class="fl">1.11</span><span class="op">)</span>,
  caption <span class="op">=</span> <span class="st">"Observed Data 2"</span>
<span class="op">)</span></code></pre></div>
<p>The following sections show <em>how to plot a Time Profile</em> for
specific scenarios</p>
<div class="section level3">
<h3 id="plot-simulated-data-only">3.1. Plot simulated data only<a class="anchor" aria-label="anchor" href="#plot-simulated-data-only"></a>
</h3>
<div class="section level4">
<h4 id="single-simulation">3.1.1 Single simulation<a class="anchor" aria-label="anchor" href="#single-simulation"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mapping</span>
<span class="va">simDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TimeProfileDataMapping.html">TimeProfileDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">simData1</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20single%20simulation-1.png" width="100%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">simData2</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20single%20simulation-2.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="single-simulation-with-confidence-interval">3.1.2. Single simulation with confidence interval<a class="anchor" aria-label="anchor" href="#single-simulation-with-confidence-interval"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mapping</span>
<span class="va">simDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TimeProfileDataMapping.html">TimeProfileDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  ymin <span class="op">=</span> <span class="st">"minConcentration"</span>,
  ymax <span class="op">=</span> <span class="st">"maxConcentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">simData1</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20single%20simulation%20with%20confidence%20interval-1.png" width="100%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">simData2</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20single%20simulation%20with%20confidence%20interval-2.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="multiple-simulations">3.1.3. Multiple simulations<a class="anchor" aria-label="anchor" href="#multiple-simulations"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mapping</span>
<span class="co"># Not using a group here will plot both profiles</span>
<span class="co"># but as they were the same data</span>
<span class="va">simDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TimeProfileDataMapping.html">TimeProfileDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span>
    <span class="va">simData1</span>,
    <span class="va">simData2</span>
  <span class="op">)</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20multiple%20simulations%20no%20caption-1.png" width="100%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mapping</span>
<span class="co"># Using a group to plot both profiles</span>

<span class="va">simDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TimeProfileDataMapping.html">TimeProfileDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span>
    <span class="va">simData1</span>,
    <span class="va">simData2</span>
  <span class="op">)</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20multiple%20simulations-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="multiple-simulations-with-confidence-interval">3.1.4. Multiple simulations with confidence interval<a class="anchor" aria-label="anchor" href="#multiple-simulations-with-confidence-interval"></a>
</h4>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mapping</span>
<span class="co"># ymin and ymax define the CI</span>
<span class="va">simDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TimeProfileDataMapping.html">TimeProfileDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  ymin <span class="op">=</span> <span class="st">"minConcentration"</span>,
  ymax <span class="op">=</span> <span class="st">"maxConcentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span>
    <span class="va">simData1</span>,
    <span class="va">simData2</span>
  <span class="op">)</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20multiple%20simulations%20with%20confidence%20interval-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level3">
<h3 id="plot-observed-data-only">3.2. Plot observed data only<a class="anchor" aria-label="anchor" href="#plot-observed-data-only"></a>
</h3>
<div class="section level4">
<h4 id="single-observed-data-set">3.2.1. Single observed data set<a class="anchor" aria-label="anchor" href="#single-observed-data-set"></a>
</h4>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mapping</span>
<span class="va">obsDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ObservedDataMapping.html">ObservedDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  observedData <span class="op">=</span> <span class="va">obsData1</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20single%20observation-1.png" width="100%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  observedData <span class="op">=</span> <span class="va">obsData2</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20single%20observation-2.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="single-simulation-with-confidence-interval-1">3.2.2. Single simulation with confidence interval<a class="anchor" aria-label="anchor" href="#single-simulation-with-confidence-interval-1"></a>
</h4>
<p>For the first dataset, the uncertainty/error was defined as standard
deviation using the variable <code>"sd"</code>. This variable will be
innerly used by the <code>ObservedDataMapping</code> object to create
corresponding <code>ymin</code> and <code>ymax</code> values for the
error bars.</p>
<p><strong>Tips</strong></p>
<ul>
<li>For data that include errorbars only partially, <code>NA</code>
values cannot be used and should be replaced by <code>0</code> for error
variable or <code>y</code> for <code>ymin</code> and <code>ymax</code>
variables.</li>
<li>For logarithmic plots, negative <code>ymin</code> values of
errorbars should be replaced by <code>y</code> beforehand in order to
still see the <code>ymax</code> range of the errorbars.</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mapping</span>
<span class="va">obsDataMapping1</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ObservedDataMapping.html">ObservedDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  error <span class="op">=</span> <span class="st">"sd"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  observedData <span class="op">=</span> <span class="va">obsData1</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping1</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20single%20observation%20with%20confidence%20interval%20as%20error-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>For the second dataset, the uncertainty/error was defined as
<code>"minConcentration"</code> and <code>"minConcentration"</code>,
they are input directly as <code>ymin</code> and <code>ymax</code> and
will be taken as is by the <code>ObservedDataMapping</code> object.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mapping</span>
<span class="va">obsDataMapping2</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ObservedDataMapping.html">ObservedDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  ymin <span class="op">=</span> <span class="st">"minConcentration"</span>,
  ymax <span class="op">=</span> <span class="st">"maxConcentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  observedData <span class="op">=</span> <span class="va">obsData2</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping2</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20single%20observation%20with%20confidence%20interval%20as%20ymin-ymax-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="multiple-observed-data-sets">3.2.3. Multiple observed data sets<a class="anchor" aria-label="anchor" href="#multiple-observed-data-sets"></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mapping</span>
<span class="va">obsDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ObservedDataMapping.html">ObservedDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  observedData <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span>
    <span class="va">obsData1</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"time"</span>, <span class="st">"concentration"</span>, <span class="st">"caption"</span><span class="op">)</span><span class="op">]</span>,
    <span class="va">obsData2</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"time"</span>, <span class="st">"concentration"</span>, <span class="st">"caption"</span><span class="op">)</span><span class="op">]</span>
  <span class="op">)</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20multiple%20observations%20no%20caption-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="multiple-observed-data-sets-with-confidence-interval">3.2.4. Multiple observed data sets with confidence interval<a class="anchor" aria-label="anchor" href="#multiple-observed-data-sets-with-confidence-interval"></a>
</h4>
<p>In this example, the observed data were not using the same way of
displaying errors. Before plotting, the data needs to be merged in a
consistent way to let the dataMapping know which variable(s) to use.</p>
<p>Below, <code>ymin</code> and <code>ymax</code> were consequently
calculated for <code>obsData1</code> before merging.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use common variable before usinf rbind.data.frame</span>
<span class="va">obsData1</span><span class="op">$</span><span class="va">minConcentration</span> <span class="op">&lt;-</span> <span class="va">obsData1</span><span class="op">$</span><span class="va">concentration</span> <span class="op">-</span> <span class="va">obsData1</span><span class="op">$</span><span class="va">sd</span>
<span class="va">obsData1</span><span class="op">$</span><span class="va">maxConcentration</span> <span class="op">&lt;-</span> <span class="va">obsData1</span><span class="op">$</span><span class="va">concentration</span> <span class="op">+</span> <span class="va">obsData1</span><span class="op">$</span><span class="va">sd</span>
<span class="va">obsData2</span><span class="op">$</span><span class="va">sd</span> <span class="op">&lt;-</span> <span class="fl">0</span>

<span class="co"># Define Data Mapping</span>
<span class="va">obsDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ObservedDataMapping.html">ObservedDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  ymin <span class="op">=</span> <span class="st">"minConcentration"</span>,
  ymax <span class="op">=</span> <span class="st">"maxConcentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  observedData <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span>
    <span class="va">obsData1</span>,
    <span class="va">obsData2</span>
  <span class="op">)</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20multiple%20observations%20with%20confidence%20interval-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="missing-dependent-variable-mdv">3.2.4. Missing Dependent Variable (mdv)<a class="anchor" aria-label="anchor" href="#missing-dependent-variable-mdv"></a>
</h4>
<p>The following code flags all values higher than <code>10</code> as
<code>mdv</code>, leadin to a plot without any observed data points
higher than <code>10</code> (removing the first observation)</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use common variable before usinf rbind.data.frame</span>
<span class="va">mdvData</span> <span class="op">&lt;-</span> <span class="va">obsData1</span>
<span class="va">mdvData</span><span class="op">$</span><span class="va">mdv</span> <span class="op">&lt;-</span> <span class="va">mdvData</span><span class="op">$</span><span class="va">concentration</span> <span class="op">&gt;</span> <span class="fl">10</span>

<span class="co"># Define Data Mapping</span>
<span class="va">obsDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ObservedDataMapping.html">ObservedDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  ymin <span class="op">=</span> <span class="st">"minConcentration"</span>,
  ymax <span class="op">=</span> <span class="st">"maxConcentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>,
  mdv <span class="op">=</span> <span class="st">"mdv"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  observedData <span class="op">=</span> <span class="va">mdvData</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/examples%20mdv-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level3">
<h3 id="plot-simulated-and-observed-data">3.3. Plot simulated and observed data<a class="anchor" aria-label="anchor" href="#plot-simulated-and-observed-data"></a>
</h3>
<p>By combining <code>data</code> and their <code>dataMapping</code>
with <code>observedData</code> and their
<code>observedDataMapping</code>, complex time profiles comparing
observed and simulated data can be plotted.</p>
<div class="section level4">
<h4 id="single-simulation-and-observed-data-set">3.3.1. Single simulation and observed data set<a class="anchor" aria-label="anchor" href="#single-simulation-and-observed-data-set"></a>
</h4>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mappings</span>
<span class="va">simDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TimeProfileDataMapping.html">TimeProfileDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="va">obsDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ObservedDataMapping.html">ObservedDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">simData1</span>,
  observedData <span class="op">=</span> <span class="va">obsData1</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/combine%20simulated%20and%20observed-1.png" width="100%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">simData2</span>,
  observedData <span class="op">=</span> <span class="va">obsData2</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/combine%20simulated%20and%20observed-2.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="single-simulation-and-observed-data-set-with-their-confidence-intervals">3.3.2. Single simulation and observed data set with their confidence
intervals<a class="anchor" aria-label="anchor" href="#single-simulation-and-observed-data-set-with-their-confidence-intervals"></a>
</h4>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mappings</span>
<span class="va">simDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TimeProfileDataMapping.html">TimeProfileDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  ymin <span class="op">=</span> <span class="st">"minConcentration"</span>,
  ymax <span class="op">=</span> <span class="st">"maxConcentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="va">obsDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ObservedDataMapping.html">ObservedDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  ymin <span class="op">=</span> <span class="st">"minConcentration"</span>,
  ymax <span class="op">=</span> <span class="st">"maxConcentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">simData1</span>,
  observedData <span class="op">=</span> <span class="va">obsData1</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/combine%20simulated%20and%20observed%20with%20ci-1.png" width="100%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">simData2</span>,
  observedData <span class="op">=</span> <span class="va">obsData2</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/combine%20simulated%20and%20observed%20with%20ci-2.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="mutliple-simulations-and-observed-data-sets">3.3.3. Mutliple simulations and observed data sets<a class="anchor" aria-label="anchor" href="#mutliple-simulations-and-observed-data-sets"></a>
</h4>
<p>Combining multiple simulations and/or observed data sets is rather
simple. To differentiate between the simulations/data sets, a grouping
variable corresponding to the legend caption needs to be defined as
illustrated below.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mappings</span>
<span class="va">simDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TimeProfileDataMapping.html">TimeProfileDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="va">obsDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ObservedDataMapping.html">ObservedDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="va">simAndObsTimeProfile</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span>
    <span class="va">simData1</span>,
    <span class="va">simData2</span>
  <span class="op">)</span>,
  observedData <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span>
    <span class="va">obsData1</span>,
    <span class="va">obsData2</span>
  <span class="op">)</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>
<span class="op">)</span>
<span class="va">simAndObsTimeProfile</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/combine%20multiple%20simulated%20and%20observed-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>In this example observed and simulated data do not share any mapping.
Therefore, their color pattern may not match. To update the plot and
have appropriate colors and labels in the legend, it is possible to get
the legend properties and update them as illustrated in the example
below that updates the positions of the legend entries:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">plotLegend</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getLegendCaption.html">getLegendCaption</a></span><span class="op">(</span><span class="va">simAndObsTimeProfile</span><span class="op">)</span> 
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">plotLegend</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="25%">
<col width="25%">
<col width="12%">
<col width="12%">
<col width="13%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">color</th>
<th align="left">fill</th>
<th align="left">linetype</th>
<th align="left">shape</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Simulated Data 1</td>
<td align="left">Simulated Data 1</td>
<td align="left">#0078D7</td>
<td align="left">#0078D7</td>
<td align="left">solid</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Simulated Data 2</td>
<td align="left">Simulated Data 2</td>
<td align="left">#D83B01</td>
<td align="left">#D83B01</td>
<td align="left">longdash</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Observed Data 1</td>
<td align="left">Observed Data 1</td>
<td align="left">#0078D7</td>
<td align="left">NA</td>
<td align="left">blank</td>
<td align="left">square</td>
</tr>
<tr class="even">
<td align="left">Observed Data 2</td>
<td align="left">Observed Data 2</td>
<td align="left">#D83B01</td>
<td align="left">NA</td>
<td align="left">blank</td>
<td align="left">bullet</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">plotLegend</span> <span class="op">&lt;-</span> <span class="va">plotLegend</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">2</span>,<span class="fl">4</span><span class="op">)</span>, <span class="op">]</span>
<span class="fu"><a href="../reference/updateTimeProfileLegend.html">updateTimeProfileLegend</a></span><span class="op">(</span><span class="va">simAndObsTimeProfile</span>, <span class="va">plotLegend</span><span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/update%20legend%20properties-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>Note that if observed and simulated data share common groupings, they
will be merged in the final legend.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">commonSimData1</span> <span class="op">&lt;-</span> <span class="va">simData1</span>
<span class="va">commonObsData1</span> <span class="op">&lt;-</span> <span class="va">obsData1</span>
<span class="va">commonSimData1</span><span class="op">$</span><span class="va">caption</span> <span class="op">&lt;-</span> <span class="st">"Common data 1"</span>
<span class="va">commonObsData1</span><span class="op">$</span><span class="va">caption</span> <span class="op">&lt;-</span> <span class="st">"Common data 1"</span>
<span class="va">commonSimData2</span> <span class="op">&lt;-</span> <span class="va">simData2</span>
<span class="va">commonObsData2</span> <span class="op">&lt;-</span> <span class="va">obsData2</span>
<span class="va">commonSimData2</span><span class="op">$</span><span class="va">caption</span> <span class="op">&lt;-</span> <span class="st">"Common data 2"</span>
<span class="va">commonObsData2</span><span class="op">$</span><span class="va">caption</span> <span class="op">&lt;-</span> <span class="st">"Common data 2"</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span><span class="va">commonSimData1</span>, <span class="va">commonSimData2</span><span class="op">)</span>,
  observedData <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span><span class="va">commonObsData1</span>, <span class="va">commonObsData2</span><span class="op">)</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/combine%20simulated%20and%20observed%20sharing%20legend-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="mutliple-simulations-and-observed-data-sets-with-their-confidence-intervals">3.3.4. Mutliple simulations and observed data sets with their
confidence intervals<a class="anchor" aria-label="anchor" href="#mutliple-simulations-and-observed-data-sets-with-their-confidence-intervals"></a>
</h4>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define Data Mappings</span>
<span class="va">simDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TimeProfileDataMapping.html">TimeProfileDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  ymin <span class="op">=</span> <span class="st">"minConcentration"</span>,
  ymax <span class="op">=</span> <span class="st">"maxConcentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="va">obsDataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ObservedDataMapping.html">ObservedDataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  x <span class="op">=</span> <span class="st">"time"</span>,
  y <span class="op">=</span> <span class="st">"concentration"</span>,
  ymin <span class="op">=</span> <span class="st">"minConcentration"</span>,
  ymax <span class="op">=</span> <span class="st">"maxConcentration"</span>,
  group <span class="op">=</span> <span class="st">"caption"</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span>
    <span class="va">simData1</span>,
    <span class="va">simData2</span>
  <span class="op">)</span>,
  observedData <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span>
    <span class="va">obsData1</span>,
    <span class="va">obsData2</span>
  <span class="op">)</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/combine%20multiple%20simulated%20and%20observed%20with%20ci-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level3">
<h3 id="plot-configuration">3.4. Plot Configuration<a class="anchor" aria-label="anchor" href="#plot-configuration"></a>
</h3>
<p>For time profile plot properties can be defined in advance using
<code>TimeProfilePlotConfiguration</code> objects.</p>
<p>The code below defines a smart plot configuration that uses
<code>data</code>, <code>metaData</code>, and <code>dataMapping</code>
to define the names of labels.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tpConfiguration</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TimeProfilePlotConfiguration.html">TimeProfilePlotConfiguration</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">simData1</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>
<span class="op">)</span></code></pre></div>
<p>As every <code>PlotConfiguration</code> objects,
<code>TimeProfilePlotConfiguration</code> objects include fields
defining the properties of its <code>lines</code>, <code>points</code>,
<code>ribbons</code> and <code>errorbars</code>. By default, these
properties are used from the current theme, but can be overridden as
illustrated below.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define which lines are used for simulated data</span>
<span class="va">tpConfiguration</span><span class="op">$</span><span class="va">lines</span><span class="op">$</span><span class="va">linetype</span> <span class="op">&lt;-</span> <span class="va">Linetypes</span><span class="op">$</span><span class="va">solid</span>
<span class="va">tpConfiguration</span><span class="op">$</span><span class="va">lines</span><span class="op">$</span><span class="va">size</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="va">tpConfiguration</span><span class="op">$</span><span class="va">lines</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"red"</span><span class="op">)</span>

<span class="co"># Define which ribbons are used for simulated data CI</span>
<span class="va">tpConfiguration</span><span class="op">$</span><span class="va">ribbons</span><span class="op">$</span><span class="va">fill</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dodgerblue"</span>, <span class="st">"firebrick"</span><span class="op">)</span>
<span class="va">tpConfiguration</span><span class="op">$</span><span class="va">ribbons</span><span class="op">$</span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">0.25</span>

<span class="co"># Define which shapes are used for observed data</span>
<span class="va">tpConfiguration</span><span class="op">$</span><span class="va">points</span><span class="op">$</span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="va">Shapes</span><span class="op">$</span><span class="va">circle</span>
<span class="va">tpConfiguration</span><span class="op">$</span><span class="va">points</span><span class="op">$</span><span class="va">size</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="va">tpConfiguration</span><span class="op">$</span><span class="va">points</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"red"</span><span class="op">)</span>

<span class="co"># Define which errorbars are used for observed data CI</span>
<span class="va">tpConfiguration</span><span class="op">$</span><span class="va">errorbars</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="st">"black"</span>
<span class="va">tpConfiguration</span><span class="op">$</span><span class="va">errorbars</span><span class="op">$</span><span class="va">size</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></code></pre></div>
<p>The corresponding plot is shown below:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plotTimeProfile.html">plotTimeProfile</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span>
    <span class="va">simData1</span>,
    <span class="va">simData2</span>
  <span class="op">)</span>,
  observedData <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind.data.frame</a></span><span class="op">(</span>
    <span class="va">obsData1</span>,
    <span class="va">obsData2</span>
  <span class="op">)</span>,
  metaData <span class="op">=</span> <span class="va">metaData</span>,
  dataMapping <span class="op">=</span> <span class="va">simDataMapping</span>,
  observedDataMapping <span class="op">=</span> <span class="va">obsDataMapping</span>,
  plotConfiguration <span class="op">=</span> <span class="va">tpConfiguration</span>
<span class="op">)</span></code></pre></div>
<p><img src="plot-time-profile_files/figure-html/time%20profile%20plot%20using%20plot%20configuration-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Michael Sevestre, Pierre Chelle, Abdullah Hamadeh.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
